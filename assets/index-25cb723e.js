(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();const c=()=>document.location.hash.replace(/^#\//,""),y=(t,e,o,a)=>{t.addEventListener(o,s=>{s.target.matches(e)&&a(s,t)})},f=(t,e)=>t.insertAdjacentHTML("afterbegin",e),w=(t,e)=>{t.replaceChildren(),f(t,e)};function h(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}const n=document.querySelector("#color-scheme-toggle"),u=n.querySelector("#color-scheme-toggle-checkbox"),g=n.querySelector("#moon"),m=n.querySelector("#sun"),p=document.documentElement,b=()=>{p.classList.add("dark"),g.classList.add("hidden"),m.classList.remove("hidden"),localStorage.theme="dark"},v=()=>{p.classList.remove("dark"),m.classList.add("hidden"),g.classList.remove("hidden"),localStorage.theme="light"},k=t=>t.currentTarget.checked?v():b();u.addEventListener("change",k);function x(){localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(b(),u.dispatchEvent(new Event("change"))):v()}class E extends EventTarget{constructor(e){super(),this.localStorageKey=e,this.todos=this.read(),this.handleCrossWindowEdit()}save(){localStorage.setItem(this.localStorageKey,JSON.stringify(this.todos)),this.dispatchEvent(new CustomEvent("save"))}read(){return JSON.parse(localStorage.getItem(this.localStorageKey)||"[]")}add(e){this.todos.push({id:h(),title:e.title,completed:!1}),this.save()}remove({id:e}){this.todos=this.todos.filter(o=>o.id!==e),this.save()}update(e){this.todos=this.todos.map(o=>o.id===e.id?e:o),this.save()}get(e){return this.todos.find(o=>o.id===e)}getByFilter(e){let o=[];switch(e){case"active":o=this.todos.filter(a=>!a.completed);break;case"completed":o=this.todos.filter(a=>a.completed);break;case"all":default:o=this.todos}return o}hasCompleted(){return this.todos.some(e=>e.completed)}hasAllCompleted(){return this.todos.every(e=>e.completed)}toggle({id:e}){this.todos=this.todos.map(o=>o.id===e?{...o,completed:!o.completed}:o),this.save()}toggleAll(){const e=!this.hasCompleted()||!this.hasAllCompleted();this.todo=this.todos.map(o=>({...o,completed:e})),this.save()}clearCompleted(){this.todos=this.todos.filter(e=>!e.completed),this.save()}handleCrossWindowEdit(){window.addEventListener("storage",()=>{this.read(),this.save()},!1)}}const d=new E("todos"),r={selectors:{input:document.querySelector('[data-todo="new"]'),list:document.querySelector('[data-todo="list"]'),footer:document.querySelector('[data-todo="footer"]'),counter:document.querySelector('[data-todo="count"]'),filters:document.querySelectorAll('[data-todo="filters"] a'),clear:document.querySelector('[data-todo="clear-completed"]')},setActiveFilter(t){r.selectors.filters.forEach(e=>{e.matches(`[href="#/${t}"]`)?e.classList.add("active","font-bold","text-indigo-600"):e.classList.remove("active","font-bold","text-indigo-600")})},showList(t){r.selectors.list.style.display=t?"block":"none"},showFooter(t){r.selectors.footer.style.display=t?"flex":"none"},updateCounter(t){w(r.selectors.counter,`${t} ${t===1?"item":"items"} left`)},showClear(t){r.selectors.clear.style.display=t?"block":"none"},addTodoItem(){r.selectors.input.addEventListener("keyup",t=>{t.key==="Enter"&&t.target.value.length&&(d.add({id:h(),title:t.target.value,completed:!1}),r.selectors.input.value="")})},editTodoItem(t,e){e.classList.add("editing");const o=e.querySelector('[data-todo="edit"]');o.classList.remove("hidden"),o.focus()},createTodoItem(t){const e=document.createElement("li"),o=t.completed;return e.classList.add("group","relative","border-b","border-slate-300","bg-white","px-6","py-5","transition-colors","first:rounded-t-md","hover:border-indigo-400","dark:border-bright","dark:bg-ebony","hover:dark:border-indigo-600"),e.dataset.id=t.id,f(e,`
		<div class="flex flex-row flex-nowrap items-center justify-start gap-4">
			<input
				class="toggle relative h-6 w-6 min-w-[24px] cursor-pointer appearance-none overflow-hidden rounded-full border border-solid border-snuff bg-transparent outline-none before:absolute before:left-0 before:top-1/3 before:h-1/2 before:w-[3px] before:origin-bottom-left before:translate-x-[10px] before:-rotate-45 before:bg-white before:opacity-0 before:content-[''] after:absolute after:left-0 after:bottom-[20%] after:h-[3px] after:w-3/4 after:origin-bottom-left after:translate-x-[10px] after:-rotate-45 after:bg-white after:opacity-0 after:content-[''] checked:border-transparent checked:bg-gradient checked:before:opacity-100 checked:after:opacity-100 hover:ring-2 hover:ring-indigo-600 hover:transition-colors focus-visible:ring-2 focus-visible:ring-indigo-600 dark:border-bright"
				data-todo="toggle"
				type="checkbox" ${o?"checked":""}>
			<label class="transition-colors break-all cursor-pointer grow text-lg text-mulled-wine dark:text-periwinkle-gray outline-none focus-visible:ring-2 focus-visible:ring-indigo-600 rounded-md
			${o?"text-mischka dark:text-trout line-through":""}" tabindex="0" data-todo="label"></label>
			<button
				class="destroy pointer-events-none relative ml-auto h-5 w-5 min-w-[20px] opacity-0 outline-none transition-opacity before:absolute before:top-1/2 before:left-1/2 before:h-px before:w-full before:-translate-x-1/2 before:-translate-y-1/2 before:rotate-45 before:border before:border-solid before:border-slate-400 before:transition-colors before:content-[''] after:absolute after:top-1/2 after:left-1/2 after:h-px after:w-full after:-translate-x-1/2 after:-translate-y-1/2 after:-rotate-45 after:border after:border-solid after:border-slate-400 after:transition-colors after:content-[''] hover:before:border-indigo-600 hover:after:border-indigo-600 focus-visible:opacity-100 focus-visible:ring-2 focus-visible:ring-indigo-600 group-hover:pointer-events-auto group-hover:opacity-100 rounded-md"
				data-todo="remove"
			></button>
		</div>
		<input
    		class="absolute z-10 appearance-none inset-0 hidden h-full w-full rounded-md bg-white px-6 py-5 text-lg shadow-xl outline-none transition-colors placeholder:text-slate-500 focus:ring-2 focus:ring-indigo-600 dark:bg-ebony dark:text-slate-300 caret-indigo-600"
    		data-todo="edit"
  		/>
		`),e.querySelector('[data-todo="label"]').textContent=t.title,e.querySelector('[data-todo="edit"]').value=t.title,e},handleTodoItemEvent(t,e,o){y(r.selectors.list,e,t,a=>{const s=a.target.closest("[data-id]");o(d.get(s.dataset.id),s,a)})},bindEvents(){d.addEventListener("save",r.render),window.addEventListener("hashchange",()=>{r.filter=c(),r.render()}),r.addTodoItem(),r.handleTodoItemEvent("click",'[data-todo="toggle"]',t=>d.toggle(t)),r.handleTodoItemEvent("click",'[data-todo="remove"]',t=>d.remove(t)),r.handleTodoItemEvent("dblclick",'[data-todo="label"]',r.editTodoItem),r.handleTodoItemEvent("keyup",'[data-todo="label"]',(t,e,o)=>{o.key==="Enter"&&r.editTodoItem(t,e,o)}),r.handleTodoItemEvent("keyup",'[data-todo="edit"]',(t,e,o)=>{const a=e.querySelector('[data-todo="edit"]');o.key==="Enter"&&a.value&&(e.classList.remove("editing"),a.classList.add("hidden"),d.update({...t,title:a.value})),o.key==="Escape"&&document.activeElement.blur()}),r.handleTodoItemEvent("focusout",'[data-todo="edit"]',(t,e)=>{e.classList.contains("editing")&&r.render()}),r.selectors.clear.addEventListener("click",()=>{d.clearCompleted()})},render(){const t=d.getByFilter("all").length;r.setActiveFilter(r.filter),r.selectors.list.replaceChildren(...d.getByFilter(r.filter).map(e=>r.createTodoItem(e))),r.showList(t),r.showFooter(t),r.updateCounter(d.getByFilter("active").length),r.showClear(d.hasCompleted())},init(){x(),r.filter=c(),r.bindEvents(),r.render()}};r.init();
